<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Product extends CI_Controller {    public function __construct() {        parent::__construct();        $this->load->model('productModel');    }    public function filter($page = 1) {        $max = (int) $this->input->get('max');        $min = (int) $this->input->get('min');        if ($max < $min || $min < 0) {            show_404();            return;        }        $data['cat_id'] = (int) $this->input->get('cat_id');        $data['min'] = $min;        $data['max'] = $max;        $data['page_num'] = $this->categoryModel->getFilterPage($min, $max, $data['cat_id']);        $data['products'] = $this->categoryModel->getByPrice($min, $max, $data['cat_id']);        $this->load->view('product/product_filter', $data);    }    public function search($page = 1) {        $keyword = $this->input->get('k');        $cat_id = (int) $this->input->get('cat_id');        $data['keyword'] = $keyword;        $data['page_num'] = $this->productModel->getSearchPage($keyword, $cat_id);        $data['products'] = $this->productModel->search($keyword, $cat_id, $page);        $data['categories'] = $this->categoryModel->getAll();        $this->load->view('product/product_search', $data);    }    public function detail($slug) {//        $this->output->cache(60 * 3);        if (empty($slug)) {            show_404();            return;        }        $product = $this->productModel->getBySlug($slug);        if (empty($product)) {            show_404();            return;        }                $this->title = $product['name'];        $category = $this->categoryModel->getById($product['cat_id']);        $product['slug'] = &$slug;        $products = $this->productModel->getOthers($product['id'], $product['cat_id']);        $data = array('product' => $product, 'category' => $category, 'products' => $products);        $data['categories'] = $this->categoryModel->getAll();        $this->load->view('product/product_detail', $data);    }}?>