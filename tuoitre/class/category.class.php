<?phpclass Category{	private $conn;	function __construct($conn){		$this->conn = $conn;	}	public function getAnotherSubCat($aname){		$query = 'SELECT subcategory.name, subcategory.aname AS asubname, category.aname AS aname 				FROM subcategory INNER JOIN category ON category.category_id = subcategory.category_id 				WHERE subcategory.category_id = ( 					SELECT  `category_id` FROM  `subcategory` 					WHERE  `aname` =  "'.$aname.'" ) 				AND subcategory.aname!="'.$aname.'"';		//echo $query;		return $this->conn->query($query);	}	public function getSubCatId($aname){		$query = 'SELECT subcategory_id FROM subcategory WHERE aname="'.$aname.'"';		$res = $this->conn->query($query);		$row = mysqli_fetch_array($res,MYSQLI_NUM);		$res->free();		return $row[0];	}	public function getCatId($aname){		$query = 'SELECT category_id FROM category WHERE aname="'.$aname.'"';		$res = $this->conn->query($query);		$row = mysqli_fetch_array($res,MYSQLI_NUM);		$res->free();		return $row[0];	}	public function getCatById($category_id){		$query = 'SELECT * FROM category WHERE category_id="'.$category_id.'"';		return $this->conn->query($query);	}	public function getSubCatById($subcategory_id){		$query = 'SELECT * FROM subcategory WHERE subcategory_id="'.$subcategory_id.'"';		return $this->conn->query($query);	}	public function editCategory($category_id,$name,$aname){		$name= $this->conn->real_escape_string($name);		$aname= $this->conn->real_escape_string($aname);		$query = 'UPDATE  category 					SET name="'.$name.'", aname="'.$aname.'" 					WHERE category_id="'.$category_id.'"';		return $this->conn->query($query);	}	public function editSubCat($subcategory_id, $name,$category_id,$aname){		$name= $this->conn->real_escape_string($name);		$aname= $this->conn->real_escape_string($aname);		$category_id= $this->conn->real_escape_string($category_id);		$subcategory_id = $this->conn->real_escape_string($subcategory_id);		$query = 'UPDATE  subcategory 					SET name="'.$name.'", aname="'.$aname.'",category_id="'.$category_id.'" 					WHERE subcategory_id="'.$subcategory_id.'"';		return $this->conn->query($query);	}	public function addCategory($name,$aname){		$name= $this->conn->real_escape_string($name);		$aname= $this->conn->real_escape_string($aname);		$query = 'INSERT INTO category(name,aname) VALUES("'.$name.'","'.$aname.'")';		return $this->conn->query($query);	}		public function addSubCat($name, $category_id, $aname){		$name= $this->conn->real_escape_string($name);		$query = 'INSERT INTO subcategory(name,category_id,aname) VALUES("'.$name.'","'.$category_id.'","'.$aname.'")';		return $this->conn->query($query);	}	public function getNumCat(){		$query = 'SELECT COUNT(category_id) FROM category';		$res = $this->conn->query($query);		$row = mysqli_fetch_array($res,MYSQLI_NUM);		$num = $row[0];		return $num;	}		public function getNumSubCat(){		$query = 'SELECT COUNT(subcategory_id) FROM subcategory';		$res = $this->conn->query($query);		$row = mysqli_fetch_array($res,MYSQLI_NUM);		$num = $row[0];		return $num;	}		public function getAllCats(){		$query = 'SELECT * FROM category';		return $this->conn->query($query);	}		public function getAllSubCats(){		$query = 'SELECT * FROM subcategory';		return $this->conn->query($query);	}	public function getSubCats($category_id){		$query = 'SELECT * FROM subcategory WHERE category_id="'.$category_id.'"';		return $this->conn->query($query);	}		public function getNumNews($subcategory_id){		$query = 'SELECT COUNT(news_id) FROM news WHERE subcategory_id="'.$subcategory_id.'"';		$res = $this->conn->query($query);		$row = mysqli_fetch_array($res,MYSQLI_NUM);		$num = $row[0];		return $num;		}	public function delCategory($category_id){		$num = mysqli_num_rows($this->getSubCats($category_id));		if($num!=0){			return false;		}		$query = 'DELETE FROM category WHERE category_id="'.$category_id.'"';		return $this->conn->query($query);	}	public function delSubCat($subcategory_id){		$num = $this->getNumNews($subcategory_id);		if($num!=0){			return false;		}		$query = 'DELETE FROM subcategory WHERE subcategory_id="'.$subcategory_id.'"';		return $this->conn->query($query);	}	}